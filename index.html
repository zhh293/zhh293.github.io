<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>你的名字 | 个人博客与项目展示</title>
  <!-- 外部资源 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Markdown 渲染器 -->
  <script src="https://cdn.jsdelivr.net/npm/marked@4.0.2/marked.min.js"></script>
  <!-- 代码高亮（可选，让Markdown中的代码块美观） -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/github-dark.min.css">
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/lib/highlight.min.js"></script>

  <!-- Tailwind 配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
            dark: '#1e293b',
            light: '#f8fafc',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto { content-visibility: auto; }
      .text-balance { text-wrap: balance; }
    }
  </style>
  <style>
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1); }
    /* Markdown 渲染样式优化 */
    .markdown-content h1 { font-size: 1.8rem; font-weight: bold; margin: 1.5rem 0 1rem; }
    .markdown-content h2 { font-size: 1.5rem; font-weight: bold; margin: 1.2rem 0 0.8rem; }
    .markdown-content p { margin-bottom: 1rem; line-height: 1.6; }
    .markdown-content ul, .markdown-content ol { margin-left: 1.5rem; margin-bottom: 1rem; }
    .markdown-content ul { list-style-type: disc; }
    .markdown-content ol { list-style-type: decimal; }
    .markdown-content pre { background: #1e293b; color: white; padding: 1rem; border-radius: 4px; margin-bottom: 1rem; overflow-x: auto; }
    .markdown-content code { font-family: monospace; }
    .markdown-content blockquote { border-left: 4px solid #2563eb; padding-left: 1rem; margin-left: 0; margin-bottom: 1rem; color: #64748b; }
    .markdown-content img { max-width: 100%; border-radius: 4px; margin: 1rem 0; }
  </style>
</head>
<body class="font-inter bg-gray-50 text-dark">
  <!-- 导航栏 -->
  <nav class="fixed w-full top-0 bg-white shadow-md z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <a href="#" class="text-primary font-bold text-xl flex items-center">
        <i class="fa fa-code mr-2"></i>你的名字
      </a>
      <div class="hidden md:flex space-x-8">
        <a href="#home" class="hover:text-primary transition-colors">首页</a>
        <a href="#blog" class="hover:text-primary transition-colors">博客</a>
        <a href="#projects" class="hover:text-primary transition-colors">项目</a>
        <a href="#about" class="hover:text-primary transition-colors">关于</a>
        <a href="#blog-guide" class="hover:text-primary transition-colors">博客管理</a>
      </div>
      <button class="md:hidden text-dark" id="mobile-menu-btn">
        <i class="fa fa-bars text-xl"></i>
      </button>
    </div>
  </nav>

  <!-- 英雄区域 -->
  <section id="home" class="pt-24 pb-16 md:pt-32 md:pb-24 bg-light">
    <div class="container mx-auto px-4 flex flex-col md:flex-row items-center">
      <div class="md:w-1/2 mb-8 md:mb-0">
        <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold mb-4">
          专注技术与创新的<br><span class="text-primary">个人博客</span>
        </h1>
        <p class="text-gray-600 text-lg mb-6 text-balance">
          分享我的技术思考、项目实践与行业见解，打造简约且专业的知识展示平台。
        </p>
        <div class="flex space-x-4">
          <a href="#blog" class="bg-primary text-white px-6 py-3 rounded-md hover:bg-primary/90 transition-colors">
            浏览博客
          </a>
          <a href="#projects" class="border border-gray-300 px-6 py-3 rounded-md hover:border-primary hover:text-primary transition-colors">
            查看项目
          </a>
        </div>
      </div>
      <div class="md:w-1/2 flex justify-center">
        <div class="w-48 h-48 md:w-64 md:h-64 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="fa fa-user text-6xl text-primary"></i>
        </div>
      </div>
    </div>
  </section>

  <!-- 博客列表区域（核心修改） -->
  <section id="blog" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-10 text-center">技术博客</h2>
      <div id="blog-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- 博客列表将通过JavaScript动态生成 -->
        <div class="col-span-full text-center py-10">加载中...</div>
      </div>
    </div>
  </section>

  <!-- 博客详情模态框 -->
  <div id="blog-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-lg p-6 md:p-8">
      <div class="flex justify-between items-center mb-4">
        <h3 id="modal-title" class="text-2xl font-bold"></h3>
        <button id="close-modal" class="text-gray-500 hover:text-dark">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div class="text-sm text-gray-500 mb-6" id="modal-date"></div>
      <div id="modal-content" class="markdown-content"></div>
    </div>
  </div>

  <!-- 博客管理指南（新增，教用户如何操作） -->
  <section id="blog-guide" class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-10 text-center">博客管理指南</h2>
      <div class="bg-white rounded-lg shadow p-6 md:p-8 max-w-3xl mx-auto">
        <h3 class="text-xl font-bold mb-4">如何发布新博客？</h3>
        <ol class="list-decimal pl-5 mb-6 space-y-2">
          <li>在你的 GitHub 仓库中，进入 <code class="bg-gray-100 px-1 py-0.5 rounded">posts</code> 文件夹</li>
          <li>点击右上角 <strong>"Add file" → "Create new file"</strong></li>
          <li>文件名格式：<code class="bg-gray-100 px-1 py-0.5 rounded">YYYY-MM-DD-文章标题.md</code>（例如：2025-10-20-前端工程化.md）</li>
          <li>用 Markdown 语法编写博客内容（支持标题、代码块、图片等）</li>
          <li>拉到页面底部，点击 <strong>"Commit new file"</strong> 提交</li>
          <li>等待 1-5 分钟，博客会自动显示在网站上</li>
        </ol>

        <h3 class="text-xl font-bold mb-4">如何编辑/删除博客？</h3>
        <ul class="list-disc pl-5 mb-6 space-y-2">
          <li><strong>编辑</strong>：进入 <code class="bg-gray-100 px-1 py-0.5 rounded">posts</code> 文件夹，点击要修改的文章，点击右上角铅笔图标修改后提交</li>
          <li><strong>删除</strong>：进入 <code class="bg-gray-100 px-1 py-0.5 rounded">posts</code> 文件夹，点击要删除的文章，点击右上角垃圾桶图标确认删除</li>
        </ul>

        <h3 class="text-xl font-bold mb-4">Markdown 常用语法参考</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="bg-gray-50 p-3 rounded">
            <p><code class="bg-white px-1 py-0.5 rounded"># 标题</code> → 一级标题</p>
            <p><code class="bg-white px-1 py-0.5 rounded">## 标题</code> → 二级标题</p>
          </div>
          <div class="bg-gray-50 p-3 rounded">
            <p><code class="bg-white px-1 py-0.5 rounded">**粗体**</code> → <strong>粗体</strong></p>
            <p><code class="bg-white px-1 py-0.5 rounded">*斜体*</code> → <em>斜体</em></p>
          </div>
          <div class="bg-gray-50 p-3 rounded">
            <p><code class="bg-white px-1 py-0.5 rounded">[链接文字](url)</code> → <a href="#">链接文字</a></p>
          </div>
          <div class="bg-gray-50 p-3 rounded">
            <p><code class="bg-white px-1 py-0.5 rounded">![图片描述](图片url)</code> → 插入图片</p>
          </div>
          <div class="bg-gray-50 p-3 rounded md:col-span-2">
            <p><code class="bg-white px-1 py-0.5 rounded">```js<br>const a = 1;<br>```</code> → 代码块（支持语法高亮）</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 项目区域（保持不变） -->
  <section id="projects" class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-10 text-center">项目展示</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- 项目卡片 1 -->
        <div class="bg-white rounded-lg overflow-hidden card-hover">
          <img src="https://picsum.photos/600/400?random=4" alt="项目截图" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 class="text-xl font-bold mb-2">智能任务管理系统</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">React</span>
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">Node.js</span>
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">MongoDB</span>
            </div>
            <p class="text-gray-600 mb-4">基于全栈技术构建的任务管理平台，支持多端同步、智能提醒与团队协作，提升工作效率...</p>
            <div class="flex space-x-4">
              <a href="#" class="text-primary font-medium hover:underline">
                <i class="fa fa-github mr-1"></i> 源码
              </a>
              <a href="#" class="text-primary font-medium hover:underline">
                <i class="fa fa-link mr-1"></i> 预览
              </a>
            </div>
          </div>
        </div>

        <!-- 项目卡片 2 -->
        <div class="bg-white rounded-lg overflow-hidden card-hover">
          <img src="https://picsum.photos/600/400?random=5" alt="项目截图" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 class="text-xl font-bold mb-2">数据可视化仪表盘</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">Vue</span>
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">ECharts</span>
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">Docker</span>
            </div>
            <p class="text-gray-600 mb-4">面向企业的数据分析平台，支持自定义报表、实时监控与多维度数据挖掘，助力业务决策...</p>
            <div class="flex space-x-4">
              <a href="#" class="text-primary font-medium hover:underline">
                <i class="fa fa-github mr-1"></i> 源码
              </a>
              <a href="#" class="text-primary font-medium hover:underline">
                <i class="fa fa-link mr-1"></i> 预览
              </a>
            </div>
          </div>
        </div>

        <!-- 项目卡片 3 -->
        <div class="bg-white rounded-lg overflow-hidden card-hover">
          <img src="https://picsum.photos/600/400?random=6" alt="项目截图" class="w-full h-48 object-cover">
          <div class="p-6">
            <h3 class="text-xl font-bold mb-2">个人博客系统（当前站点）</h3>
            <div class="flex flex-wrap gap-2 mb-4">
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">HTML</span>
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">Tailwind CSS</span>
              <span class="text-xs bg-primary/10 text-primary px-3 py-1 rounded-full">GitHub Pages</span>
            </div>
            <p class="text-gray-600 mb-4">简约风格的个人博客与项目展示站，基于静态页面技术构建，部署于 GitHub Pages，专注内容表达...</p>
            <div class="flex space-x-4">
              <a href="https://github.com/zhh293/zhh293.github.io" class="text-primary font-medium hover:underline" target="_blank">
                <i class="fa fa-github mr-1"></i> 源码
              </a>
              <a href="https://zhh293.github.io" class="text-primary font-medium hover:underline" target="_blank">
                <i class="fa fa-link mr-1"></i> 预览
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 关于区域（保持不变） -->
  <section id="about" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-10 text-center">关于我</h2>
      <div class="flex flex-col md:flex-row items-center gap-8">
        <div class="md:w-1/3 flex justify-center">
          <div class="w-40 h-40 rounded-full bg-primary/10 flex items-center justify-center">
            <i class="fa fa-user text-5xl text-primary"></i>
          </div>
        </div>
        <div class="md:w-2/3">
          <p class="text-gray-700 text-lg mb-6">
            我是一名专注于全栈开发的工程师，热爱技术探索与知识分享。擅长前端工程化、后端服务架构与数据可视化，
            坚信技术的价值在于解决实际问题与创造用户价值。
          </p>
          <h3 class="text-xl font-bold mb-4">技术栈</h3>
          <div class="flex flex-wrap gap-3 mb-6">
            <span class="px-4 py-2 bg-gray-100 rounded-full">JavaScript/TypeScript</span>
            <span class="px-4 py-2 bg-gray-100 rounded-full">React/Vue</span>
            <span class="px-4 py-2 bg-gray-100 rounded-full">Node.js</span>
            <span class="px-4 py-2 bg-gray-100 rounded-full">Docker/Kubernetes</span>
            <span class="px-4 py-2 bg-gray-100 rounded-full">MySQL/MongoDB</span>
          </div>
          <h3 class="text-xl font-bold mb-4">联系方式</h3>
          <div class="flex space-x-6">
            <a href="#" class="text-gray-600 hover:text-primary transition-colors">
              <i class="fa fa-github text-2xl"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-primary transition-colors">
              <i class="fa fa-linkedin text-2xl"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-primary transition-colors">
              <i class="fa fa-envelope text-2xl"></i>
            </a>
            <a href="#" class="text-gray-600 hover:text-primary transition-colors">
              <i class="fa fa-weixin text-2xl"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 页脚（保持不变） -->
  <footer class="bg-dark text-white py-10">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-6 md:mb-0">
          <p class="text-lg font-bold">你的名字 | 个人博客</p>
          <p class="text-gray-400">专注技术分享与项目展示</p>
        </div>
        <div class="flex space-x-4">
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fa fa-github text-xl"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fa fa-linkedin text-xl"></i>
          </a>
          <a href="#" class="text-gray-400 hover:text-white transition-colors">
            <i class="fa fa-envelope text-xl"></i>
          </a>
        </div>
      </div>
      <div class="mt-8 text-center text-gray-400 text-sm">
        <p>© 2025 你的名字. 保留所有权利.</p>
      </div>
    </div>
  </footer>

  <!-- 回到顶部按钮 -->
  <button id="backToTop" class="fixed bottom-6 right-6 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300">
    <i class="fa fa-arrow-up"></i>
  </button>

  <script>
    // 核心：通过 GitHub API 读取 posts 文件夹下的 Markdown 文件
    const GITHUB_USER = 'zhh293'; // 替换为你的 GitHub 用户名
    const REPO_NAME = 'zhh293.github.io'; // 替换为你的仓库名
    const POSTS_FOLDER = 'posts'; // 博客存放的文件夹名

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', () => {
      // 初始化代码高亮
      hljs.highlightAll();
      
      // 加载博客列表
      loadBlogList();
      
      // 绑定事件
      bindEvents();
    });

    // 绑定页面事件
    function bindEvents() {
      // 关闭博客详情模态框
      document.getElementById('close-modal').addEventListener('click', () => {
        document.getElementById('blog-modal').classList.add('hidden');
      });

      // 回到顶部按钮
      const backToTopBtn = document.getElementById('backToTop');
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopBtn.classList.remove('opacity-0', 'invisible');
          backToTopBtn.classList.add('opacity-100', 'visible');
        } else {
          backToTopBtn.classList.add('opacity-0', 'invisible');
          backToTopBtn.classList.remove('opacity-100', 'visible');
        }
      });
      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // 移动端菜单（简单实现）
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      mobileMenuBtn.addEventListener('click', () => {
        alert('移动端菜单可根据需求扩展，当前点击仅作示例~');
      });
    }

    // 1. 加载博客列表（通过 GitHub API 获取 posts 文件夹下的所有文件）
    async function loadBlogList() {
      const blogListEl = document.getElementById('blog-list');
      blogListEl.innerHTML = '<div class="col-span-full text-center py-10">加载中...</div>';

      try {
        // 调用 GitHub API 获取 posts 文件夹下的文件列表
        const apiUrl = `https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents/${POSTS_FOLDER}`;
        const response = await fetch(apiUrl);
        
        if (!response.ok) {
          throw new Error(`获取文件列表失败（${response.status}）`);
        }

        const files = await response.json();
        if (!files.length) {
          blogListEl.innerHTML = '<div class="col-span-full text-center py-10">暂无博客文章，快去发布第一篇吧！</div>';
          return;
        }

        // 过滤出 .md 文件，并按日期排序（最新的在前）
        const mdFiles = files
          .filter(file => file.name.endsWith('.md'))
          .sort((a, b) => new Date(b.updated_at) - new Date(a.updated_at));

        // 生成博客列表 HTML
        blogListEl.innerHTML = '';
        mdFiles.forEach(file => {
          // 解析文件名：YYYY-MM-DD-标题.md → 提取日期和标题
          const fileName = file.name;
          const dateMatch = fileName.match(/(\d{4}-\d{2}-\d{2})/);
          const date = dateMatch ? dateMatch[1] : '未知日期';
          const title = fileName.replace(/\d{4}-\d{2}-\d{2}-/, '').replace('.md', '');

          blogListEl.innerHTML += `
            <div class="bg-light rounded-lg overflow-hidden card-hover" onclick="openBlogDetail('${file.path}')">
              <img src="https://picsum.photos/600/400?random=${fileName.substring(0,5)}" alt="博客封面" class="w-full h-48 object-cover">
              <div class="p-6">
                <span class="text-sm text-gray-500">${formatDate(date)}</span>
                <h3 class="text-xl font-bold mt-2 mb-3">${title}</h3>
                <p class="text-gray-600 mb-4 line-clamp-3">点击查看全文...</p>
                <a href="#" class="text-primary font-medium flex items-center hover:underline">
                  阅读全文 <i class="fa fa-arrow-right ml-2"></i>
                </a>
              </div>
            </div>
          `;
        });

      } catch (error) {
        blogListEl.innerHTML = `
          <div class="col-span-full text-center py-10 text-red-500">
            加载失败：${error.message}<br>
            请检查 GitHub 用户名和仓库名是否正确
          </div>
        `;
        console.error('加载博客列表出错：', error);
      }
    }

    // 2. 打开博客详情（通过 GitHub API 获取 Markdown 内容并渲染）
    async function openBlogDetail(filePath) {
      try {
        // 调用 GitHub API 获取单个 Markdown 文件内容（base64 编码）
        const apiUrl = `https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/contents/${filePath}`;
        const response = await fetch(apiUrl);
        
        if (!response.ok) {
          throw new Error(`获取文章失败（${response.status}）`);
        }

        const fileData = await response.json();
        // 解码 base64 内容
        const markdownContent = atob(fileData.content);
        // 解析文件名获取标题和日期
        const fileName = fileData.name;
        const dateMatch = fileName.match(/(\d{4}-\d{2}-\d{2})/);
        const date = dateMatch ? formatDate(dateMatch[1]) : '未知日期';
        const title = fileName.replace(/\d{4}-\d{2}-\d{2}-/, '').replace('.md', '');

        // 填充模态框内容
        document.getElementById('modal-title').textContent = title;
        document.getElementById('modal-date').textContent = date;
        document.getElementById('modal-content').innerHTML = marked.parse(markdownContent);
        // 对渲染后的代码块重新应用高亮
        hljs.highlightAll();
        // 显示模态框
        document.getElementById('blog-modal').classList.remove('hidden');

      } catch (error) {
        alert(`加载文章失败：${error.message}`);
        console.error('加载博客详情出错：', error);
      }
    }

    // 工具函数：格式化日期（YYYY-MM-DD → 年月日）
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('zh-CN', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    }

    // 暴露函数到全局（供 HTML 中 onclick 调用）
    window.openBlogDetail = openBlogDetail;
  </script>
</body>
</html>
